{
 "awd_id": "1940551",
 "agcy_id": "NSF",
 "tran_type": "Grant",
 "awd_istr_txt": "Standard Grant",
 "awd_titl_txt": "EAGER: Embedded Deep Neural Nets for Predicting Reynolds Stresses in Complex Flows",
 "cfda_num": "47.041",
 "org_code": "07020000",
 "po_phone": "7032927030",
 "po_email": "rjoslin@nsf.gov",
 "po_sign_block_name": "Ron Joslin",
 "awd_eff_date": "2019-10-01",
 "awd_exp_date": "2022-03-31",
 "tot_intn_awd_amt": 299404.0,
 "awd_amount": 299404.0,
 "awd_min_amd_letter_date": "2019-07-25",
 "awd_max_amd_letter_date": "2019-07-25",
 "awd_abstract_narration": "Engineers rely on computational simulation of turbulent flows prior to costly experimental testing to design automobiles, ships, jet engines, wind turbine arrays, and many other flow systems. Realistic turn-around times from concept to solution requires using approximate models to represent the effects of turbulence in the design process. Direct numerical simulations capturing all details of the flow are too expensive for practical full-scale systems, and standard turbulence models are unable to accurately predict the complex, three-dimensional flows pervasive throughout engineering systems. Contemporary machine learning algorithms are creating a paradigm shift in the information that can be gleaned from data and the scale of the data sets that can be efficiently processed. The goal of this project is to improve turbulence models using a data-driven approach which leverages the massive data sets produced by direct numerical simulation of the flows.  \r\n\r\nThe fundamental hypothesis of this research is that a machine learning model which accurately predicts the turbulent stresses for a given mean flow field will improve simulation results when implemented in a Reynolds-Averaged Navier-Stokes code. This project will develop improved models for the anisotropy tensor and terms in the turbulent kinetic energy transport equation using deep neural networks. Neural networks will be trained using only direct numerical simulation data and implemented directly in a computational fluid dynamics solver so that the predictions are independent of errors in any baseline model: a substantial advancement over existing discrepancy-based methods.  Development of interpretability methods will elevate neural networks from black box tools to trustable models with clearer links between predictions and the underlying flow structures. Techniques for identifying flow regions where the neural net is poorly trained will produce robust machine-learned models that do not degrade computational fluid dynamics predictions below baseline model performance. Our approach also introduces corrective terms into the basic governing equations. Therefore, the lessons learned will provide a framework for future modeling work in any mechanics-based engineering discipline.  The models will be tested using experimental data for a number of industrially relevant flows that have caused difficulty for conventional models.\r\n\r\nThis award reflects NSF's statutory mission and has been deemed worthy of support through evaluation using the Foundation's intellectual merit and broader impacts review criteria.",
 "awd_arra_amount": 0.0,
 "dir_abbr": "ENG",
 "org_dir_long_name": "Directorate for Engineering",
 "div_abbr": "CBET",
 "org_div_long_name": "Division of Chemical, Bioengineering, Environmental, and Transport Systems",
 "awd_agcy_code": "4900",
 "fund_agcy_code": "4900",
 "pi": [
  {
   "pi_role": "Principal Investigator",
   "pi_first_name": "John",
   "pi_last_name": "Eaton",
   "pi_mid_init": "K",
   "pi_sufx_name": "",
   "pi_full_name": "John K Eaton",
   "pi_email_addr": "eatonj@stanford.edu",
   "nsf_id": "000447015",
   "pi_start_date": "2019-07-25",
   "pi_end_date": null
  }
 ],
 "inst": {
  "inst_name": "Stanford University",
  "inst_street_address": "450 JANE STANFORD WAY",
  "inst_street_address_2": "",
  "inst_city_name": "STANFORD",
  "inst_state_code": "CA",
  "inst_state_name": "California",
  "inst_phone_num": "6507232300",
  "inst_zip_code": "943052004",
  "inst_country_name": "United States",
  "cong_dist_code": "16",
  "st_cong_dist_code": "CA16",
  "org_lgl_bus_name": "THE LELAND STANFORD JUNIOR UNIVERSITY",
  "org_prnt_uei_num": "",
  "org_uei_num": "HJD6G4D6TJY5"
 },
 "perf_inst": {
  "perf_inst_name": "Stanford University",
  "perf_str_addr": "450 Serra Mall",
  "perf_city_name": "Stanford",
  "perf_st_code": "CA",
  "perf_st_name": "California",
  "perf_zip_code": "943052004",
  "perf_ctry_code": "US",
  "perf_cong_dist": "16",
  "perf_st_cong_dist": "CA16",
  "perf_ctry_name": "United States",
  "perf_ctry_flag": "1"
 },
 "pgm_ele": [
  {
   "pgm_ele_code": "144300",
   "pgm_ele_name": "FD-Fluid Dynamics"
  }
 ],
 "pgm_ref": [
  {
   "pgm_ref_code": "7916",
   "pgm_ref_txt": "EAGER"
  }
 ],
 "app_fund": [
  {
   "app_code": "0119",
   "app_name": "NSF RESEARCH & RELATED ACTIVIT",
   "app_symb_id": "040100",
   "fund_code": "01001920DB",
   "fund_name": "NSF RESEARCH & RELATED ACTIVIT",
   "fund_symb_id": "040100"
  }
 ],
 "oblg_fy": [
  {
   "fund_oblg_fiscal_yr": 2019,
   "fund_oblg_amt": 299404.0
  }
 ],
 "por": {
  "por_cntn": "<div class=\"porColContainerWBG\">\n<div class=\"porContentCol\"><p>The major goal of the project is to study and develop machine-learned approaches to improve turbulence modeling for Reynolds-averaged Navier Stokes computations using tensor basis neural network (TBNN) models trained on high-fidelity LES data in complex 3D flows. TBNN models for the Reynolds stresses are created following the tensor basis neural network (TBNN) architecture of Ling et al. (JFM, 2016). However, our approach differs from Ling et al. in that the TBNN is embedded within the RANS code, so that the input quantities come from the current simulation iteration. All RANS simulations were run in Fluent using the realizable k-e (RKE) model as the baseline with a hexahedral mesh with 5 million nodes.&nbsp;</p>\n<p>The flows considered here are a single jet in cross flow (JICF) inclined at an angle of 30 degrees with blowing ratios (BR) of 1 and 2 and the flow behind an asymmetric 3D bump skewed at 10 degrees. Figure 1 shows the JICF domain. TBNN models were trained on the JICF BR1 and BR2 and the bump (B10) LES data. This allowed evaluation of the performance for models based on the same flow, similar flow, and very different flow (B10). In addition, models with 3 and 10 tensor basis terms were used for the BR2 case to evaluate the importance of model complexity.</p>\n<p>Figure 2 shows the root-mean-square-error (RMSE) or square root of the L2 loss for four of the models used for the BR2 case in addition to the RMSE between the typical linear viscosity model used in RANS models and the LES. The latter value (shown by the black dashed line) is approximately three times higher than the lowest values which belong to the two TBNN models that were trained on the BR2 data. These two have similarly low values even though one had 3 terms and the other had 10. The model trained on the BR1 data had slightly higher error while the model trained on the bump data which is a very different type of flow had significantly more error but still less than the RANS error.</p>\n<p>The initial conditions for the simulations to test the TBNN models were the fully converged RANS solutions for the BR1 and BR2 cases. With the RANS velocity field as the initial condition, the modeled anisotropy was applied to the momentum and TKE equations, and the velocity field was allowed to evolve. With this method of embedding the models in the RANS code, the models can be updated with current velocity field information every iteration.</p>\n<p>The jet in cross flow is a complex three-dimensional flow making an evaluation of the performance of the TBNN anisotropy models challenging. Two of the quantities used to evaluate model performance include velocity and circulation in the jet's counter-rotating vortices. A simple comparison of streamwise velocity contours in the spanwise/vertical crossplane at the center of the jet exit in Figure 3 shows large differences between the LES and RANS cases with and without the TBNN models for BR1 and BR2&nbsp;although some TBNN models improve the results.&nbsp;Note the two exceptions are associated with models that were applied to the BR2 flow but trained on a different flow. The model trained on the bump flow (B10) provides too much forcing.&nbsp;</p>\n<p>Another way to evaluate the accuracy of the RANS simulations is to compare the strength of the counter-rotating vortex pair (CVP) to the LES results. The CVP is important for mixing the fluid in the jet with fluid in the cross flow. Circulation is a good measure of the strength of the vortices and is calculated by integrating the flux of vorticity through the areas of the two rectangles shown in Figure 4. Figure 5 shows the normalized circulation in each vortex at different distances downstream from the jet exit. The circulation in the baseline RANS is significantly lower than in the LES, and the two TBNN models (one trained on BR2, the other trained on BR1) increase the vortex strength to values similar to the LES. The bump model increases the circulation well above the LES values. Overall, there is definite improvement in the strength of the CVP from the TBNN models trained on the jet in cross flow data.&nbsp;</p>\n<p>In general, the TBNN models trained and used to simulate the same flow, BR1 or BR2, improved the velocity field in terms of jet trajectory and characteristics of the major vortex structures in the flow. The TBNN trained on a similar jet in cross flow but with different blowing ratio also helped enhance the circulation of the CVP but had less effect on improving the trajectory of the jet. Finally, the TBNN trained on the characteristically different bump flow enhanced the jet and CVP too much resulting in poorer agreement with the LES velocity and scalar fields.&nbsp;</p>\n<p>&nbsp;</p><br>\n<p>\n\t\t\t\t      \tLast Modified: 06/07/2022<br>\n\t\t\t\t\tModified by: John&nbsp;K&nbsp;Eaton</p>\n</div>\n<div class=\"porSideCol\">\n<div class=\"each-gallery\">\n<div class=\"galContent\" id=\"gallery0\">\n<div class=\"photoCount\" id=\"photoCount0\">\n\t\t\t\t\t\t\t\t\tImages (<span id=\"selectedPhoto0\">1</span> of <span class=\"totalNumber\"></span>)\t\t\n\t\t\t\t\t\t\t\t</div>\n<div class=\"galControls\" id=\"controls0\"></div>\n<div class=\"galSlideshow\" id=\"slideshow0\"></div>\n<div class=\"galEmbox\" id=\"embox\">\n<div class=\"image-title\"></div>\n</div>\n</div>\n<div class=\"galNavigation\" id=\"navigation0\">\n<ul class=\"thumbs\" id=\"thumbs0\">\n<li>\n<a href=\"/por/images/Reports/POR/2022/1940551/1940551_10625217_1654197869611_ProjectOutcomesImage1--rgov-214x142.jpg\" original=\"/por/images/Reports/POR/2022/1940551/1940551_10625217_1654197869611_ProjectOutcomesImage1--rgov-800width.jpg\" title=\"Figure 1. The Jet in Cross Flow Domain\"><img src=\"/por/images/Reports/POR/2022/1940551/1940551_10625217_1654197869611_ProjectOutcomesImage1--rgov-66x44.jpg\" alt=\"Figure 1. The Jet in Cross Flow Domain\"></a>\n<div class=\"imageCaptionContainer\">\n<div class=\"imageCaption\">Arrows show the inflow and outflow. A centerplane is shown with contours of streamwise velocity for the blowing ratio = 2 case.</div>\n<div class=\"imageCredit\">JK Eaton</div>\n<div class=\"imagePermisssions\">Copyrighted</div>\n<div class=\"imageSubmitted\">John&nbsp;K&nbsp;Eaton</div>\n<div class=\"imageTitle\">Figure 1. The Jet in Cross Flow Domain</div>\n</div>\n</li>\n<li>\n<a href=\"/por/images/Reports/POR/2022/1940551/1940551_10625217_1654198269281_ProjectOutcomesImage2--rgov-214x142.jpg\" original=\"/por/images/Reports/POR/2022/1940551/1940551_10625217_1654198269281_ProjectOutcomesImage2--rgov-800width.jpg\" title=\"Figure 2. Root Mean Square Error Between TBNN and LES Reynolds Stress Anisotropy\"><img src=\"/por/images/Reports/POR/2022/1940551/1940551_10625217_1654198269281_ProjectOutcomesImage2--rgov-66x44.jpg\" alt=\"Figure 2. Root Mean Square Error Between TBNN and LES Reynolds Stress Anisotropy\"></a>\n<div class=\"imageCaptionContainer\">\n<div class=\"imageCaption\">RMSE between anisotropy predicted using TBNN and LES for the BR=2 JICF. 7x10 and 7x3 refer to the 7 input variables to the neural net and 10 or 3 basis tensors used in the model. The dashed line is RMSE between the LES anisotropy and the linear viscosity model used to model anisotropy in RANS.</div>\n<div class=\"imageCredit\">JK Eaton</div>\n<div class=\"imagePermisssions\">Copyrighted</div>\n<div class=\"imageSubmitted\">John&nbsp;K&nbsp;Eaton</div>\n<div class=\"imageTitle\">Figure 2. Root Mean Square Error Between TBNN and LES Reynolds Stress Anisotropy</div>\n</div>\n</li>\n<li>\n<a href=\"/por/images/Reports/POR/2022/1940551/1940551_10625217_1654198693231_ProjectOutcomesImage3--rgov-214x142.jpg\" original=\"/por/images/Reports/POR/2022/1940551/1940551_10625217_1654198693231_ProjectOutcomesImage3--rgov-800width.jpg\" title=\"Figure 3. Contours of streamwise velocity in crossplanes at the center of the jet exit for the BR1 and BR2 JICF simulation results.\"><img src=\"/por/images/Reports/POR/2022/1940551/1940551_10625217_1654198693231_ProjectOutcomesImage3--rgov-66x44.jpg\" alt=\"Figure 3. Contours of streamwise velocity in crossplanes at the center of the jet exit for the BR1 and BR2 JICF simulation results.\"></a>\n<div class=\"imageCaptionContainer\">\n<div class=\"imageCaption\">LES, RANS, or RANS with TBNN models trained on BR1 and BR2 and bump (B10) LES data. The TBNN models except those trained on BR1 and B10 and tested on BR2 improve the velocity field by speeding up the flow in the top, right, and left regions of the jet while slowing the lower center of the jet.</div>\n<div class=\"imageCredit\">JK Eaton</div>\n<div class=\"imagePermisssions\">Copyrighted</div>\n<div class=\"imageSubmitted\">John&nbsp;K&nbsp;Eaton</div>\n<div class=\"imageTitle\">Figure 3. Contours of streamwise velocity in crossplanes at the center of the jet exit for the BR1 and BR2 JICF simulation results.</div>\n</div>\n</li>\n<li>\n<a href=\"/por/images/Reports/POR/2022/1940551/1940551_10625217_1654198877181_ProjectOutcomesImage4--rgov-214x142.jpg\" original=\"/por/images/Reports/POR/2022/1940551/1940551_10625217_1654198877181_ProjectOutcomesImage4--rgov-800width.jpg\" title=\"Figure 4. Circulation Calculation for the CVP\"><img src=\"/por/images/Reports/POR/2022/1940551/1940551_10625217_1654198877181_ProjectOutcomesImage4--rgov-66x44.jpg\" alt=\"Figure 4. Circulation Calculation for the CVP\"></a>\n<div class=\"imageCaptionContainer\">\n<div class=\"imageCaption\">LES velocity field at X/D=2 shown by vectors and streamwise velocity contours. The black boxes around vortices indicate the region over which vorticity flux is integrated to calculate circulation. Circulation is normalized using Uc, the average bulk velocity in the channel and D, the jet diameter.</div>\n<div class=\"imageCredit\">JK Eaton</div>\n<div class=\"imagePermisssions\">Copyrighted</div>\n<div class=\"imageSubmitted\">John&nbsp;K&nbsp;Eaton</div>\n<div class=\"imageTitle\">Figure 4. Circulation Calculation for the CVP</div>\n</div>\n</li>\n<li>\n<a href=\"/por/images/Reports/POR/2022/1940551/1940551_10625217_1654198979962_ProjectOutcomesImage5--rgov-214x142.jpg\" original=\"/por/images/Reports/POR/2022/1940551/1940551_10625217_1654198979962_ProjectOutcomesImage5--rgov-800width.jpg\" title=\"Figure 5. Normalized Circulation at Different Distances Downstream of the Jet for the BR2 JICF\"><img src=\"/por/images/Reports/POR/2022/1940551/1940551_10625217_1654198979962_ProjectOutcomesImage5--rgov-66x44.jpg\" alt=\"Figure 5. Normalized Circulation at Different Distances Downstream of the Jet for the BR2 JICF\"></a>\n<div class=\"imageCaptionContainer\">\n<div class=\"imageCaption\">Values are shown for LES, baseline RANS, and TBNN models trained on BR1, BR2, and bump (B10) data. The TBNN models trained on the BR1 and BR2 data both strengthen the vortices to levels comparable to the LES. The vortices in the results for the TBNN model based on the bump are much too strong.</div>\n<div class=\"imageCredit\">JK Eaton</div>\n<div class=\"imagePermisssions\">Copyrighted</div>\n<div class=\"imageSubmitted\">John&nbsp;K&nbsp;Eaton</div>\n<div class=\"imageTitle\">Figure 5. Normalized Circulation at Different Distances Downstream of the Jet for the BR2 JICF</div>\n</div>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
  "por_txt_cntn": "\nThe major goal of the project is to study and develop machine-learned approaches to improve turbulence modeling for Reynolds-averaged Navier Stokes computations using tensor basis neural network (TBNN) models trained on high-fidelity LES data in complex 3D flows. TBNN models for the Reynolds stresses are created following the tensor basis neural network (TBNN) architecture of Ling et al. (JFM, 2016). However, our approach differs from Ling et al. in that the TBNN is embedded within the RANS code, so that the input quantities come from the current simulation iteration. All RANS simulations were run in Fluent using the realizable k-e (RKE) model as the baseline with a hexahedral mesh with 5 million nodes. \n\nThe flows considered here are a single jet in cross flow (JICF) inclined at an angle of 30 degrees with blowing ratios (BR) of 1 and 2 and the flow behind an asymmetric 3D bump skewed at 10 degrees. Figure 1 shows the JICF domain. TBNN models were trained on the JICF BR1 and BR2 and the bump (B10) LES data. This allowed evaluation of the performance for models based on the same flow, similar flow, and very different flow (B10). In addition, models with 3 and 10 tensor basis terms were used for the BR2 case to evaluate the importance of model complexity.\n\nFigure 2 shows the root-mean-square-error (RMSE) or square root of the L2 loss for four of the models used for the BR2 case in addition to the RMSE between the typical linear viscosity model used in RANS models and the LES. The latter value (shown by the black dashed line) is approximately three times higher than the lowest values which belong to the two TBNN models that were trained on the BR2 data. These two have similarly low values even though one had 3 terms and the other had 10. The model trained on the BR1 data had slightly higher error while the model trained on the bump data which is a very different type of flow had significantly more error but still less than the RANS error.\n\nThe initial conditions for the simulations to test the TBNN models were the fully converged RANS solutions for the BR1 and BR2 cases. With the RANS velocity field as the initial condition, the modeled anisotropy was applied to the momentum and TKE equations, and the velocity field was allowed to evolve. With this method of embedding the models in the RANS code, the models can be updated with current velocity field information every iteration.\n\nThe jet in cross flow is a complex three-dimensional flow making an evaluation of the performance of the TBNN anisotropy models challenging. Two of the quantities used to evaluate model performance include velocity and circulation in the jet's counter-rotating vortices. A simple comparison of streamwise velocity contours in the spanwise/vertical crossplane at the center of the jet exit in Figure 3 shows large differences between the LES and RANS cases with and without the TBNN models for BR1 and BR2 although some TBNN models improve the results. Note the two exceptions are associated with models that were applied to the BR2 flow but trained on a different flow. The model trained on the bump flow (B10) provides too much forcing. \n\nAnother way to evaluate the accuracy of the RANS simulations is to compare the strength of the counter-rotating vortex pair (CVP) to the LES results. The CVP is important for mixing the fluid in the jet with fluid in the cross flow. Circulation is a good measure of the strength of the vortices and is calculated by integrating the flux of vorticity through the areas of the two rectangles shown in Figure 4. Figure 5 shows the normalized circulation in each vortex at different distances downstream from the jet exit. The circulation in the baseline RANS is significantly lower than in the LES, and the two TBNN models (one trained on BR2, the other trained on BR1) increase the vortex strength to values similar to the LES. The bump model increases the circulation well above the LES values. Overall, there is definite improvement in the strength of the CVP from the TBNN models trained on the jet in cross flow data. \n\nIn general, the TBNN models trained and used to simulate the same flow, BR1 or BR2, improved the velocity field in terms of jet trajectory and characteristics of the major vortex structures in the flow. The TBNN trained on a similar jet in cross flow but with different blowing ratio also helped enhance the circulation of the CVP but had less effect on improving the trajectory of the jet. Finally, the TBNN trained on the characteristically different bump flow enhanced the jet and CVP too much resulting in poorer agreement with the LES velocity and scalar fields. \n\n \n\n\t\t\t\t\tLast Modified: 06/07/2022\n\n\t\t\t\t\tSubmitted by: John K Eaton"
 }
}